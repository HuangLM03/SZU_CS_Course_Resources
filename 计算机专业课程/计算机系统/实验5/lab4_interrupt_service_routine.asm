.ORIG x2000

LOOP
LDI R3, KBDR
BRz LOOP
LD R4, Enter
ADD R3, R3, R4
BRnp READ
RTI

READ
AND R4, R4, #0
ADD R4, R4, #10
LDI R0, KBDR

STROUT
LDI R5, DSR
BRzp STROUT
STI R0, DDR
ADD R4, R4, #-1
BRp STROUT
AND R4, R4, #0
STI R4, KBDR
BRnzp LOOP

KBDR .FILL xFE02
DSR .FILL xFE04
DDR .FILL xFE06
Enter .FILL xFFF6
.END

